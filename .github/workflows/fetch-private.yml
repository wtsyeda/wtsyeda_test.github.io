name: Fetch Private Repo Files and Update README

on: [push]

jobs:
  fetch-private-repo:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Public Repository
        uses: actions/checkout@v3

      - name: Clone Private Repository (Temporarily)
        env:
          GITHUB_TOKEN: ${{ secrets.PAT_TOKEN }}
        run: |
          git clone https://x-access-token:$GITHUB_TOKEN@github.com/wtsyeda/wtsyeda_private.git private-folder
          echo "🔍 Listing files in private-folder:"
          ls -la private-folder  # Debugging

      - name: Update README with Private Data
        run: |
          echo "# My Publications" > README.md
          echo "" >> README.md
          echo "## Latest Updates" >> README.md
          echo "" >> README.md
          cat private-folder/sensitive-data.txt >> README.md  # Insert private data
          echo "" >> README.md
          echo "✅ README.md updated successfully!"

      - name: Commit and Push Updated README
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "actions@github.com"
          git add README.md
          git commit -m "Updated README with private data"
          git push origin main
